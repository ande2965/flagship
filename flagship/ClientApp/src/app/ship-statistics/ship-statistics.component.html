<mat-toolbar class="stats-toolbar">
  <mat-select (selectionChange)="selectArc(armament)" [(value)]="armament" style="width: 150px;">
    <mat-option [value]="ship.frontArmament">Front Arc</mat-option>
    <mat-option [value]="ship.leftArmament">Side Arc</mat-option>
    <mat-option [value]="ship.leftAuxArmament" *ngIf="ship.leftAuxArmament">Auxiliary Arc</mat-option>
    <mat-option [value]="ship.rearArmament">Rear Arc</mat-option>
  </mat-select>
  <flagship-battery [armament]="armament"></flagship-battery>
  <span fxFlex></span>
  
</mat-toolbar>
<mat-drawer-container class="stats-container">
  <mat-drawer mode="side" position="end" opened>
    <div fxLayout="column" style="margin-top: 8px;" class="stats-sidenav">
      what's up
    </div>
  </mat-drawer>
  <mat-drawer-content>
    <div class="content mat-typography" fxLayout="column" fxLayoutGap="16px">

      <mat-card>
        <mat-card-header>
          <div mat-card-avatar>
            <mat-icon>bar_chart</mat-icon>
          </div>
          <mat-card-title>
            {{ longRange.yAxisLabel }} Chart
          </mat-card-title>
          <mat-card-subtitle>
            View expected damage, accuracies, and critical hits at all ranges.
          </mat-card-subtitle>
          <mat-button-toggle-group value="DMG" fxLayout="row" class="stat-selector">
              <mat-button-toggle fxFlex value="DMG" (change)="selectStat('DMG')" matTooltip="Damage">
                <i class="ffi ffi-swa-hit"></i>
              </mat-button-toggle>
              <mat-button-toggle fxFlex value="ACC" (change)="selectStat('ACC')" matTooltip="Accuracies">
                <i class="ffi ffi-swa-accuracy"></i>
              </mat-button-toggle>
              <mat-button-toggle fxFlex value="CRT" (change)="selectStat('CRT')" matTooltip="Criticals">
                <i class="ffi ffi-swa-crit"></i>
              </mat-button-toggle>
            </mat-button-toggle-group>
        </mat-card-header>
        <mat-card-content>
          <p>Charts display the expected value at all ranges Â± one standard deviation.</p>
          <div fxLayout="column" fxLayout.gt-sm="row" fxLayoutAlign="space-between">
            <div fxFlex.gt-sm="33" class="chart-wrapper" style="min-height: 250px;">
              <div class="chart-wrapper">
                <ngx-charts-bar-vertical [scheme]="longRange.colorScheme" [results]="longRange.data"
                  [gradient]="longRange.gradient" [xAxis]="longRange.showXAxis" [yAxis]="longRange.showYAxis"
                  [legend]="longRange.showLegend" [showXAxisLabel]="longRange.showXAxisLabel"
                  [showYAxisLabel]="longRange.showYAxisLabel" [xAxisLabel]="longRange.xAxisLabel"
                  [yAxisLabel]="longRange.yAxisLabel" (select)="onSelect($event)" [yScaleMax]="longRange.yScaleMax"
                  [noBarWhenZero]="false">
                </ngx-charts-bar-vertical>
              </div>
            </div>
            <div fxFlex.gt-sm="33" class="chart-wrapper" style="min-height: 250px;">
              <div class="chart-wrapper">
                <ngx-charts-bar-vertical [scheme]="mediumRange.colorScheme" [results]="mediumRange.data"
                  [gradient]="mediumRange.gradient" [xAxis]="mediumRange.showXAxis" [yAxis]="mediumRange.showYAxis"
                  [legend]="mediumRange.showLegend" [showXAxisLabel]="mediumRange.showXAxisLabel"
                  [showYAxisLabel]="mediumRange.showYAxisLabel" [xAxisLabel]="mediumRange.xAxisLabel"
                  [yAxisLabel]="mediumRange.yAxisLabel" (select)="onSelect($event)" [yScaleMax]="mediumRange.yScaleMax"
                  [noBarWhenZero]="false">
                </ngx-charts-bar-vertical>
              </div>
            </div>
            <div fxFlex.gt-sm="33" class="chart-wrapper" style="min-height: 250px;">
              <div class="chart-wrapper">
                <ngx-charts-bar-vertical [scheme]="closeRange.colorScheme" [results]="closeRange.data"
                  [gradient]="closeRange.gradient" [xAxis]="closeRange.showXAxis" [yAxis]="closeRange.showYAxis"
                  [legend]="closeRange.showLegend" [showXAxisLabel]="closeRange.showXAxisLabel"
                  [showYAxisLabel]="closeRange.showYAxisLabel" [xAxisLabel]="closeRange.xAxisLabel"
                  [yAxisLabel]="closeRange.yAxisLabel" (select)="onSelect($event)" [yScaleMax]="closeRange.yScaleMax"
                  [noBarWhenZero]="false">
                </ngx-charts-bar-vertical>
              </div>
            </div>
          </div>
        </mat-card-content>
      </mat-card>
      <mat-card>
        <mat-card-header>
          <div mat-card-avatar>
            <mat-icon>table</mat-icon>
          </div>
          <mat-card-title>
            Statistics
          </mat-card-title>
          <mat-card-subtitle>
            View statistics by range in tabular format.
          </mat-card-subtitle>
        </mat-card-header>
        <mat-card-content>
          <p>Statistics are expected values (means). Standard deviation is listed in parenthesis.</p>
        </mat-card-content>
          <table mat-table [dataSource]="tableData" style="width: 100%">
            <ng-container matColumnDef="range">
              <th mat-header-cell *matHeaderCellDef>Range</th>
              <td mat-cell *matCellDef="let row"> {{row.range}} </td>
            </ng-container>
            <ng-container matColumnDef="dmg">
              <th mat-header-cell *matHeaderCellDef>Damage</th>
              <td mat-cell *matCellDef="let row">
                {{row.pool.expectedDamage().mean}}
                ({{ row.pool.expectedDamage().deviation | number }})
              </td>
            </ng-container>
            <ng-container matColumnDef="acc">
              <th mat-header-cell *matHeaderCellDef>Accuracies</th>
              <td mat-cell *matCellDef="let row">
                {{row.pool.expectedAccuracies().mean}}
                ({{ row.pool.expectedAccuracies().deviation | number }})
              </td>
            </ng-container>
            <ng-container matColumnDef="crit">
              <th mat-header-cell *matHeaderCellDef>Criticals</th>
              <td mat-cell *matCellDef="let row">
                {{row.pool.expectedCriticals().mean}}
                ({{ row.pool.expectedCriticals().deviation | number }})
              </td>
            </ng-container>
            <tr mat-header-row *matHeaderRowDef="['range', 'dmg', 'acc', 'crit']"></tr>
            <tr mat-row *matRowDef="let tableData; columns: ['range', 'dmg', 'acc', 'crit']"></tr>
          </table>
      </mat-card>
    </div>
  </mat-drawer-content>
</mat-drawer-container>
